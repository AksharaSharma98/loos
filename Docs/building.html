<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>LOOS: Building LOOS</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">Lightweight Object-Oriented Structure library (LOOS)</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="building">Building LOOS </a></h1><h2><a class="anchor" name="Build">
Configuration</a></h2>
There are several build targets available:<p>
<table align="center" border="1" cellspacing="3" cellpadding="3">
<tr align="left">
<th>Target</th><th>Description </th></tr>
<tr align="left">
<td>(default)</td><td>Build the library and the tools </td></tr>
<tr align="left">
<td>lib</td><td>Builds the library only </td></tr>
<tr align="left">
<td>tests</td><td>Builds and runs the verification tests </td></tr>
<tr align="left">
<td>docs</td><td>Uses Doxygen to generate new docs. </td></tr>
<tr align="left">
<td>caboodle</td><td>Builds everything, including docs and tests </td></tr>
</table>
<p>
There are several different build options that are available for LOOS. These are handled on the command-line by SCons as "foo=1" to turn the option on or "foo=0" to turn it off. Most options default to off. Finally, you can query the available options by passing the "-h" flag to SCons. The following table lists the principal build options:<p>
<table align="center" border="1" cellspacing="3" cellpadding="3">
<tr align="left">
<th>Option</th><th>Default</th><th>Description </th></tr>
<tr align="left">
<td>debug</td><td>0</td><td>Adds "-DDEBUG" to build </td></tr>
<tr align="left">
<td>release</td><td>0</td><td>Turns on aggressive optimization (-O3) </td></tr>
<tr align="left">
<td>regenerate</td><td>0</td><td>Regenerates the test verification data </td></tr>
<tr align="left">
<td>reparse</td><td>0</td><td>Runs bison/flex to create the C++ files for parsing selections </td></tr>
</table>
<h3><a class="anchor" name="Regeneration">
Regeneration</a></h3>
The verification tests include sample output that is compared against the current build. If differences are found, they are flagged as potential problems with the library. If you update a test, change systems (such as running on OS X as opposed to Linux), or perhaps didn't get the test data from the SVN, then you will need to generate new test data and verify it manually. To do so, use the SCons command: <div class="fragment"><pre class="fragment">
scons regenerate=1 tests
</pre></div><h3><a class="anchor" name="Reparsing">
Reparsing</a></h3>
To remove the dependency on Bison/Flex, the output from these tools for the grammar and scanner are included. If you want to rebuild them, you will need to use the 'reparse=1' option. The catch is that if you have a different version of flex installed, there is a good chance there will be a conflict with the bundled <a class="el" href="_flex_lexer_8h-source.html">FlexLexer.h</a> include file. If you see odd compiler errors, try removing that file and rebuilding. Alternatively, forcibly remove all generated files by doing "rm *.cc *.hh" (assuming you've added no files with those suffixes), then rebuild.<h3><a class="anchor" name="Distro">
Building a distribution</a></h3>
To build a distribution that doesn't require Doxygen and Bison/Flex, the following is recommended: <div class="fragment"><pre class="fragment">
scons regenerate=1 tests
scons docs
scons -c tests
</pre></div><p>
As a side-note, regenerating the verification data is potentially hazardous if you have not been making sure your builds already pass, so caveat bugger... </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Apr 21 10:15:19 2010 for LOOS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
