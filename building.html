<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LOOS: Building LOOS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LOOS
   &#160;<span id="projectnumber">v2.3.3-beta</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('building.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Building LOOS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="basicbuild"></a>
Building Basics</h1>
<p>LOOS requires <a href="http://www.scons.org" target="_blank">SCons</a> and the <a href="http://boost.org" target="_blank">Boost (1.36+)</a> libraries. For macs, it also requires <a href="https://itunes.apple.com/us/app/xcode/id497799835?mt=12" target="_blank">XCode</a> be installed (free download from the Mac App Store). On Linux, <a href="http://math-atlas.sourceforge.net" target="_blank">Atlas</a> is <em>strongly</em> recommended, although the standard LAPACK and BLAS should work. If you plan to modify the parser (and you probably shouldn't), then you'll need the GNU utilities <a href="http://www.gnu.org/software/flex/">flex</a> and <a href="http://www.gnu.org/software/bison/">bison</a>. Although LOOS comes bundled with pre-built documentation, you can regenerate it. Doing so requires doxygen and graphviz be installed.</p>
<p>To build LOOS, go into the LOOS distribution directory and run scons. If your libraries are installed in non-standard locations, you may need to tell LOOS where its required components are. There are two ways you can tell SCons where to look for those libraries. The first is to specify it on the command-line. The second, described later, is to use a <code>custom.py</code> file.</p>
<p>Using the command line, if you have Boost installed in <code>/usr/local/boost_1_54_0</code>, build LOOS using: </p><pre class="fragment">scons BOOST=/usr/local/boost_1_54_0
</pre><p>This will tell SCons to look in <code>/usr/local/boost_1_54_0/include</code> for header files and <code>/usr/local/boost_1_54_0/lib</code> for libraries. In some cases, the directories may not follow this convention, so you will need to specify the individual directories explicitly: </p><pre class="fragment">scons BOOST_INCLUDE=/usr/local/include/boost BOOST_LIBPATH=/usr/local/lib
</pre><p>SCons will, by default, try to figure out the appropriate threaded Boost libraries to use and, if it cannot find those, it will use the non-threaded versions. While the build system can handle most variants of the Boost library names, it may not catch all. To explicitly set the libraries LOOS is linked with, set the BOOST_LIBS variable to a space-separated list of libraries. Note that you <b>must</b> include all libraries required by LOOS. For example: </p><pre class="fragment">scons BOOST_LIBS="boost_regex-gcc43-mt boost_program_options-gcc43-mt
boost_thread-gcc43-mt boost_system-gcc43-mt"
</pre><p>Similar configuration options are available for NetCDF and ATLAS/LAPACK. If threaded versions of ATLAS are found, these will be used by default. If you intend to run multiple LOOS tools concurrently, then you may get better performance by using the serial ATLAS libraries. You can force LOOS to build with the serial ATLAS libraries by using the threads option with scons, </p><pre class="fragment">scons threads=0
</pre><p> SCons will also prefer to use ATLAS if it's available, but will revert to LAPACK/BLAS if necessary. For Macs, the Accelerate FrameWork is used rather than ATLAS. NetCDF support is only included if the NetCDF library is found.</p>
<p>It is not necessary to always set these build options on the command-line. If a <code>custom.py</code> file exists, SCons will read it and set the variables appropriately. We provide an examples of how it can be used in <code>custom.py-proto</code>. Simply copy this file to <code>custom.py</code> and then uncomment and edit the appropriate lines. Note that variables set on the command-line or environment will have priority over what's in your <code>custom.py</code> file.</p>
<p>More complete build information, along with platform specific notes, can be found in the INSTALL file included with LOOS.</p>
<h2><a class="anchor" id="install"></a>
Installing</h2>
<p>To install LOOS, use the "install" target:</p>
<pre class="fragment">scons install
</pre><p>This will cause SCons to copy the headers, tools, and library into /opt/loos. You can change where LOOS is installed by setting the PREFIX variable in either your custom.py file or on the command line. LOOS will create a /bin, /include, /lib, and /docs directory and copy the appropriate files. The recommended installation methodology is to install LOOS into a version-specific directory, and then set up a symlink from <code>loos-latest</code> to the most recent installed version: </p><pre class="fragment">scons PREFIX=/opt/loos-2.1 install
ln -s /opt/loos-2.1 /opt/loos-latest
</pre><p> Remember that any options you have previously provided to scons should be specified again when installing.</p>
<h2>Important Note...</h2>
<p>To use LOOS, your environment must be first setup: </p><pre class="fragment">  (bash)   source /path/to/loos/setup.sh
  (tcsh)   source /path/to/loos/setup.csh
</pre><hr/>
 <h2><a class="anchor" id="building_pyloos"></a>
Building PyLOOS, the Python Interface to LOOS</h2>
<p>PyLOOS will be automatically built if you have a recent swig (2.0+) installed. PyLOOS now (as of LOOS 2.3.0) also requires NumPy. See the top of the INSTALL and <a class="el" href="faq.html#faq_pyloos">the FAQ for PyLOOS</a> for more information about building and using PyLOOS.</p>
<p>In some cases, scons may try to build PyLOOS when it isn't appropriate (i.e. supported). To disable PyLOOS, use the pyloos flag, </p><pre class="fragment">scons pyloos=0
</pre><hr/>
<h2><a class="anchor" id="general"></a>
General Notes</h2>
<p>If you're using a compiler in a non-standard location (e.g. you have your own build of the latest and greatest gcc), SCons may not be using it even though your $PATH is set correctly. You can force which compiler is used to build LOOS by setting the CXX variable in your "custom.py" file.</p>
<p>Note: Settings in the custom.py file can be overridden using the command-line and the shell environment.</p>
<p>SCons supports building LOOS in parallel. If you have 4 cores, for example, use "scons -j4" to use all 4 cores.</p>
<p>Prebuilt documentation for LOOS is provided as part of the distribution. This is simply copied into the install directory as part of installation. Should you want to build a new version of the documentation, Doxygen is required. Moreover, due to an issue we ran into with SCons, documentation building and installation are decoupled. What this means is that you must explicitly build the docs (i.e. "scons docs") and -then- install, "scons install". Running "scons install" will -not- rebuild the documentation, even if it is out of date (or nonexistent).</p>
<h2><a class="anchor" id="BYO"></a>
Building Your Own Tools</h2>
<p>You have two choices for building your own tools depending on LOOS. The simplest way is to work in the Packages/User directory. In that case, all you need to do to build against LOOS (other than write your application, of course) is edit the SConscript file in that directory, adding your program to the build list. Specifically, you edit the line that creates a variable "apps", appending your program's name to the end of the string. Then, run scons from the main LOOS directory, and your program will be built. We have included a number of trivial programs in the User directory; they don't actually do anything useful, but they provide basic templates for how to use the command line options, and get the basic setup you'll need. Note that tools in the User package will be installed if you choose to install LOOS.</p>
<p>If you wish to work outside the LOOS directory structure, copy the SConstruct and SConscript files from the Examples directory and edit them as needed. You can probably get by with just editing the SConscript file. To build, you will need to have sourced one of the LOOS setup scripts (e.g. <code>setup.sh</code>). This will set several environment variables that will tell your SConstruct where LOOS is and how it was built. If all goes well, running <code>scons</code> in your directory will build your tools. If not, you can change your environment variables or alternatively, <em>not</em> source the LOOS setup script and use a <code>custom.py</code> file.</p>
<h3>Important Note</h3>
<p>The environment <em>always</em> overrides what's in the SConstruct and in the <code>custom.py</code> file. If you create a <code>custom.py</code> file and change the <code>LOOS_CCFLAGS</code> variable, it will be ignored in favor of what <code>LOOS_CCFLAGS</code> was set to when you sourced the <code>setup.sh</code> script.</p>
<hr/>
<h1><a class="anchor" id="Build"></a>
Targets</h1>
<p>There are several build targets available:</p>
<table align="center">
<tr align="left">
<th>Target</th><th>Description </th></tr>
<tr align="left">
<td>all (default)</td><td>Build the library, tools, packages, and PyLOOS </td></tr>
<tr align="left">
<td>core</td><td>Builds the library and PyLOOS only </td></tr>
<tr align="left">
<td>docs</td><td>Rebuilds the documentation </td></tr>
<tr align="left">
<td>install</td><td>Installs library, toosl, PyLOOS, and all packages (except user) </td></tr>
</table>
<p>Each package in LOOS is also a build target. The LOOS library and only that package will be built. The current set of packages are:</p>
<table align="center">
<tr align="left">
<td><a class="el" href="namespace_e_n_m.html" title="Namespace to encapsulate Elastic Network Model routines. ">ENM</a></td><td>Elastic Network Models </td></tr>
<tr align="left">
<td>HBonds</td><td>Hydrogen bonds analysis </td></tr>
<tr align="left">
<td>Conv</td><td>Simulation convergence analysis </td></tr>
<tr align="left">
<td>Density</td><td>Density/3D histogram tools </td></tr>
<tr align="left">
<td>User</td><td>User created tools </td></tr>
<tr align="left">
<td>Python</td><td>PyLOOS-based scripts </td></tr>
</table>
<p>There are several different build options that are available for LOOS. These are handled on the command-line by SCons as "foo=1" to turn the option on or "foo=0" to turn it off. Most options default to off. Finally, you can query the available options by passing the "-h" flag to SCons. The following table lists the principal build options:</p>
<table align="center">
<tr align="left">
<th>Option</th><th>Default</th><th>Description </th></tr>
<tr align="left">
<td>debug</td><td>0</td><td>Adds "-DDEBUG" to build </td></tr>
<tr align="left">
<td>release</td><td>1</td><td>Turns on aggressive optimization (-O3) </td></tr>
<tr align="left">
<td>regenerate</td><td>0</td><td>Regenerates the test verification data </td></tr>
<tr align="left">
<td>reparse</td><td>0</td><td>Runs bison/flex to create the C++ files for parsing selections </td></tr>
</table>
<h2><a class="anchor" id="Reparsing"></a>
Reparsing</h2>
<p>To remove the dependency on Bison/Flex, the output from these tools for the grammar and scanner are included. If you want to rebuild them, you will need to use the 'reparse=1' option. The catch is that if you have a different version of flex installed, there is a good chance there will be a conflict with the bundled FlexLexer.h include file. If you see odd compiler errors, try removing that file and rebuilding. Alternatively, forcibly remove all generated files by doing "rm *.cc *.hh" (assuming you've added no files with those suffixes), then rebuild. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Lightweight Object-Oriented Structure library (LOOS)</a></li><li class="navelem"><a class="el" href="changes.html">Change Log</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
